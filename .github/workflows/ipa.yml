name: Ð¡Ð±Ð¾Ñ€ÐºÐ° dylib Ð´Ð»Ñ Ñ€Ð°ÑÑ‚ÑÐ³Ð° ÑÐºÑ€Ð°Ð½Ð° Ð² Ð¸Ð³Ñ€Ð°Ñ… (Ð±ÐµÐ· Ð´Ð¶ÐµÐ¹Ð»Ð±Ñ€ÐµÐ¹ÐºÐ°)

on:
  workflow_dispatch:
    inputs:
      stretch_method:
        description: 'ÐœÐµÑ‚Ð¾Ð´ Ñ€Ð°ÑÑ‚ÑÐ³Ð°'
        required: true
        default: 'fov'
        type: choice
        options:
          - fov           # Ð£Ð²ÐµÐ»Ð¸Ñ‡ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»Ñ Ð·Ñ€ÐµÐ½Ð¸Ñ
          - aspect        # Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ ÑÐ¾Ð¾Ñ‚Ð½Ð¾ÑˆÐµÐ½Ð¸Ñ ÑÑ‚Ð¾Ñ€Ð¾Ð½
          - resolution    # Ð¤Ð¾Ñ€ÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ñ
          - metal_hack    # Metal API Ñ…Ð°Ðº
      stretch_value:
        description: 'Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ñ€Ð°ÑÑ‚ÑÐ³Ð° (90-120 Ð´Ð»Ñ FOV, 1.0-2.0 Ð´Ð»Ñ aspect)'
        required: true
        default: '110'
      game_bundle:
        description: 'Bundle ID Ð¸Ð³Ñ€Ñ‹ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€ com.tencent.tmgp.pubgm)'
        required: true
        default: 'com.tencent.tmgp.pubgm'
      ios_version:
        description: 'Ð¦ÐµÐ»ÐµÐ²Ð°Ñ iOS Ð²ÐµÑ€ÑÐ¸Ñ'
        required: true
        default: '14.0'

jobs:
  build-stretch-dylib:
    runs-on: macos-latest
    permissions:
      contents: write
    
    steps:
      - name: Ð§ÐµÐºÐ°ÑƒÑ‚
        uses: actions/checkout@v4
      
      - name: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° iOS SDK Ð¸ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²
        run: |
          # Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð±Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ Ñ‡ÐµÑ€ÐµÐ· brew
          brew update
          brew install \
            ldid \
            ios-deploy \
            ideviceinstaller \
            libimobiledevice \
            jq || true
          
          # Ð¡ÐºÐ°Ñ‡Ð¸Ð²Ð°ÐµÐ¼ insert_dylib Ð¸Ð· Ð¸ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¾Ð² (Ñ‚Ð°Ðº ÐºÐ°Ðº Ð½ÐµÑ‚ Ð² brew)
          cd /tmp
          git clone https://github.com/Tyilo/insert_dylib
          cd insert_dylib
          xcodebuild
          cp build/Release/insert_dylib /usr/local/bin/
          chmod +x /usr/local/bin/insert_dylib
          
          # Ð¡ÐºÐ°Ñ‡Ð¸Ð²Ð°ÐµÐ¼ Ð¸ ÑƒÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Azule Ð´Ð»Ñ Ð²Ð½ÐµÐ´Ñ€ÐµÐ½Ð¸Ñ dylib Ð² IPA
          cd /tmp
          git clone https://github.com/Al4ise/Azule
          cd Azule
          chmod +x azule
          cp azule /usr/local/bin/
          
          # Ð¡ÐºÐ°Ñ‡Ð¸Ð²Ð°ÐµÐ¼ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¸ iOS Runtime
          git clone https://github.com/nst/iOS-Runtime-Headers.git ~/iOS-Headers
          
          # ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÑƒ
          echo "âœ… ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²:"
          which ldid && echo "ldid OK"
          which insert_dylib && echo "insert_dylib OK" || echo "insert_dylib Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½"
          which azule && echo "azule OK" || echo "azule Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½"
          
          echo "ðŸ›  Ð˜Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹"
      
      - name: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Theos (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾, Ð´Ð»Ñ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ð¾Ð¹ ÑÐ±Ð¾Ñ€ÐºÐ¸)
        run: |
          # Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Theos Ð´Ð»Ñ Ð±Ð¾Ð»ÐµÐµ Ð¿Ñ€Ð¾Ð´Ð²Ð¸Ð½ÑƒÑ‚Ð¾Ð¹ ÑÐ±Ð¾Ñ€ÐºÐ¸
          export THEOS=/opt/theos
          sudo mkdir -p $THEOS
          sudo chown $(whoami) $THEOS
          git clone --recursive https://github.com/theos/theos.git $THEOS
          
          # Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾ÐºÐ¸
          cd $THEOS
          ./bin/update-theos
          
          # Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ SDK
          curl -LO https://github.com/xybp888/iOS-SDKs/releases/download/iPhoneOS14.5.sdk/iPhoneOS14.5.sdk.tar.xz
          tar -xvf iPhoneOS14.5.sdk.tar.xz -C $THEOS/sdks/
          
          echo "âœ… Theos ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½ Ð² $THEOS"
      
      - name: Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ dylib Ñ Ñ€Ð°ÑÑ‚ÑÐ³Ð¾Ð¼
        run: |
          mkdir -p stretchlib
          
          # Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Makefile Ð´Ð»Ñ Theos
          cat > stretchlib/Makefile << 'EOF'
          export THEOS = /opt/theos
          include $(THEOS)/makefiles/common.mk
          
          TWEAK_NAME = ScreenStretch
          ScreenStretch_FILES = stretch.m
          ScreenStretch_CFLAGS = -fobjc-arc
          ScreenStretch_FRAMEWORKS = UIKit Foundation Metal
          
          include $(THEOS_MAKE_PATH)/tweak.mk
          EOF
          
          # Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ ÐºÐ¾Ð´ dylib
          cat > stretchlib/stretch.m << 'EOF'
          #import <Foundation/Foundation.h>
          #import <UIKit/UIKit.h>
          #import <objc/runtime.h>
          
          // ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ñ€Ð°ÑÑ‚ÑÐ³Ð°
          #define STRETCH_METHOD ${{ github.event.inputs.stretch_method }}
          #define STRETCH_VALUE ${{ github.event.inputs.stretch_value }}
          #define GAME_BUNDLE @"${{ github.event.inputs.game_bundle }}"
          
          @interface ScreenStretch : NSObject
          + (void)load;
          + (void)applyStretch;
          @end
          
          @implementation ScreenStretch
          
          + (void)load {
              NSString *bundleID = [[NSBundle mainBundle] bundleIdentifier];
              if ([bundleID isEqualToString:GAME_BUNDLE]) {
                  NSLog(@"ðŸŽ® Ð Ð°ÑÑ‚ÑÐ³ Ð°ÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ð½ Ð´Ð»Ñ %@ (Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: %d)", bundleID, STRETCH_VALUE);
                  
                  // Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ñ Ð·Ð°Ð´ÐµÑ€Ð¶ÐºÐ¾Ð¹, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¸Ð³Ñ€Ð° ÑƒÑÐ¿ÐµÐ»Ð° Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒÑÑ
                  dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(3.0 * NSEC_PER_SEC)), 
                               dispatch_get_main_queue(), ^{
                      [self applyStretch];
                  });
              }
          }
          
          + (void)applyStretch {
              UIWindow *keyWindow = [UIApplication sharedApplication].keyWindow;
              if (!keyWindow) return;
              
              // ÐŸÑ€Ð¸Ð¼ÐµÐ½ÑÐµÐ¼ Ñ€Ð°ÑÑ‚ÑÐ³ Ð² Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¾Ñ‚ Ð¼ÐµÑ‚Ð¾Ð´Ð°
              float stretchFactor = STRETCH_VALUE / 100.0;
              
              // Ð˜Ñ‰ÐµÐ¼ Ð¸Ð³Ñ€Ð¾Ð²ÑƒÑŽ ÐºÐ°Ð¼ÐµÑ€Ñƒ
              UIView *gameView = [self findGameView:keyWindow];
              
              if (gameView) {
                  // Ð Ð°ÑÑ‚ÑÐ³Ð¸Ð²Ð°ÐµÐ¼ Ð¸Ð³Ñ€Ð¾Ð²Ð¾Ð¹ view
                  gameView.transform = CGAffineTransformMakeScale(stretchFactor, stretchFactor);
                  gameView.frame = keyWindow.bounds;
                  
                  // ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ð¸Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€
                  [self showStretchIndicator:keyWindow];
                  
                  NSLog(@"âœ… Ð Ð°ÑÑ‚ÑÐ³ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½ Ðº Ð¸Ð³Ñ€Ð¾Ð²Ð¾Ð¼Ñƒ view: %@", gameView);
              } else {
                  NSLog(@"âš ï¸ Ð˜Ð³Ñ€Ð¾Ð²Ð¾Ð¹ view Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½, Ð¿Ñ€Ð¾Ð±ÑƒÐµÐ¼ Ð°Ð»ÑŒÑ‚ÐµÑ€Ð½Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ð¹ Ð¼ÐµÑ‚Ð¾Ð´");
                  [self alternativeStretch:keyWindow];
              }
          }
          
          + (UIView *)findGameView:(UIView *)view {
              // Ð ÐµÐºÑƒÑ€ÑÐ¸Ð²Ð½Ð¾ Ð¸Ñ‰ÐµÐ¼ Ð¸Ð³Ñ€Ð¾Ð²Ð¾Ð¹ view Ð¿Ð¾ Ñ…Ð°Ñ€Ð°ÐºÑ‚ÐµÑ€Ð½Ñ‹Ð¼ Ð¿Ñ€Ð¸Ð·Ð½Ð°ÐºÐ°Ð¼
              if ([view isKindOfClass:NSClassFromString(@"GLKView")] ||
                  [view isKindOfClass:NSClassFromString(@"MTKView")] ||
                  [view isKindOfClass:NSClassFromString(@"EAGLView")]) {
                  return view;
              }
              
              for (UIView *subview in view.subviews) {
                  UIView *found = [self findGameView:subview];
                  if (found) return found;
              }
              
              return nil;
          }
          
          + (void)alternativeStretch:(UIWindow *)window {
              // ÐÐ»ÑŒÑ‚ÐµÑ€Ð½Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ð¹ Ð¼ÐµÑ‚Ð¾Ð´ - Ñ€Ð°ÑÑ‚ÑÐ³Ð¸Ð²Ð°ÐµÐ¼ Ð²ÑÐµ
              [UIView animateWithDuration:0.5 animations:^{
                  window.rootViewController.view.transform = CGAffineTransformMakeScale(1.2, 1.2);
              }];
          }
          
          + (void)showStretchIndicator:(UIWindow *)window {
              UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(20, 50, 200, 40)];
              label.text = [NSString stringWithFormat:@"ðŸ”´ Ð ÐÐ¡Ð¢Ð¯Ð“ %d%%", STRETCH_VALUE];
              label.textColor = [UIColor redColor];
              label.backgroundColor = [UIColor blackColor];
              label.alpha = 0.7;
              label.layer.cornerRadius = 10;
              label.clipsToBounds = YES;
              label.textAlignment = NSTextAlignmentCenter;
              label.font = [UIFont boldSystemFontOfSize:14];
              label.tag = 9999;
              
              [window addSubview:label];
              
              // Ð£Ð±Ð¸Ñ€Ð°ÐµÐ¼ Ñ‡ÐµÑ€ÐµÐ· 5 ÑÐµÐºÑƒÐ½Ð´
              dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(5.0 * NSEC_PER_SEC)), 
                           dispatch_get_main_queue(), ^{
                  [label removeFromSuperview];
              });
          }
          
          @end
          
          // Ð¢Ð¾Ñ‡ÐºÐ° Ð²Ñ…Ð¾Ð´Ð°
          __attribute__((constructor)) static void init() {
              NSLog(@"ðŸ“± dylib Ñ Ñ€Ð°ÑÑ‚ÑÐ³Ð¾Ð¼ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½ (Ð¼ÐµÑ‚Ð¾Ð´: %d, Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: %d)", 
                    STRETCH_METHOD, STRETCH_VALUE);
          }
          EOF
          
          # Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒÐ½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð»
          cat > stretchlib/control << EOF
          Package: com.stretch.game
          Name: Game Screen Stretch
          Version: 1.0-${{ github.run_number }}
          Architecture: iphoneos-arm
          Description: Ð Ð°ÑÑ‚ÑÐ³ ÑÐºÑ€Ð°Ð½Ð° Ð´Ð»Ñ Ð¸Ð³Ñ€
          Maintainer: GitHub Actions
          Author: GitHub Actions
          Section: Tweaks
          Depends: mobilesubstrate (>= 0.9.5000)
          EOF
      
      - name: ÐšÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ†Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· Theos
        run: |
          cd stretchlib
          export THEOS=/opt/theos
          
          # ÐšÐ¾Ð¼Ð¿Ð¸Ð»Ð¸Ñ€ÑƒÐµÐ¼ Ñ‚Ð²Ð¸Ðº
          make
          
          # Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ deb Ð¿Ð°ÐºÐµÑ‚
          make package
          
          # ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹
          cp .theos/obj/debug/ScreenStretch.dylib ../stretch.dylib
          cp packages/*.deb ../stretch-game.deb || true
          
          cd ..
          
          # Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ plist Ð´Ð»Ñ MobileSubstrate
          cat > stretch.plist << EOF
          {
            Filter = {
              Bundles = (
                "${{ github.event.inputs.game_bundle }}"
              );
            };
          }
          EOF
          
          # ÐŸÐ¾Ð´Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ dylib
          ldid -S stretch.dylib
          
          echo "âœ… ÐšÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ†Ð¸Ñ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°"
          file stretch.dylib
      
      - name: Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð° IPA Ñ Ð²Ð½ÐµÐ´Ñ€ÐµÐ½Ð½Ñ‹Ð¼ dylib (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)
        run: |
          mkdir -p injected
          
          # Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð´ÐµÐ¼Ð¾-IPA Ð´Ð»Ñ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð°
          cat > injected/README.txt << EOF
          ðŸ”§ Ð˜ÐÐ¡Ð¢Ð Ð£ÐšÐ¦Ð˜Ð¯ ÐŸÐž Ð’ÐÐ•Ð”Ð Ð•ÐÐ˜Ð® DYLIB Ð’ Ð˜Ð“Ð Ð£:
          
          1. Ð¡ÐšÐÐ§ÐÐ™Ð¢Ð• ÐÐ£Ð–ÐÐ«Ð• Ð˜ÐÐ¡Ð¢Ð Ð£ÐœÐ•ÐÐ¢Ð«:
          --------------------------------
          - Azule: https://github.com/Al4ise/Azule
          - insert_dylib: https://github.com/Tyilo/insert_dylib
          
          2. Ð¡ÐŸÐžÐ¡ÐžÐ‘ 1 - Ð§Ð•Ð Ð•Ð— AZULE (ÐŸÐ ÐžÐ¡Ð¢ÐžÐ™):
          --------------------------------
          azule -i Game.ipa -o Patched.ipa -f stretch.dylib
          
          3. Ð¡ÐŸÐžÐ¡ÐžÐ‘ 2 - Ð§Ð•Ð Ð•Ð— INSERT_DYLIB (Ð Ð£Ð§ÐÐžÐ™):
          --------------------------------
          # Ð Ð°ÑÐ¿Ð°ÐºÐ¾Ð²Ð°Ñ‚ÑŒ IPA
          unzip Game.ipa -d Payload/
          
          # Ð’Ð½ÐµÐ´Ñ€Ð¸Ñ‚ÑŒ dylib Ð² Ð±Ð¸Ð½Ð°Ñ€Ð½Ð¸Ðº
          insert_dylib @executable_path/stretch.dylib Payload/Game.app/Game Payload/Game.app/Game_patched
          
          # Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»
          mv Payload/Game.app/Game_patched Payload/Game.app/Game
          
          # Ð¡ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ dylib
          cp stretch.dylib Payload/Game.app/
          
          # ÐŸÐ¾Ð´Ð¿Ð¸ÑÐ°Ñ‚ÑŒ
          codesign -f -s - Payload/Game.app
          
          # Ð—Ð°Ð¿Ð°ÐºÐ¾Ð²Ð°Ñ‚ÑŒ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾
          zip -r Patched.ipa Payload/
          
          4. Ð£Ð¡Ð¢ÐÐÐžÐ’ÐšÐ:
          --------------------------------
          - Ð¡ Ð´Ð¶ÐµÐ¹Ð»Ð±Ñ€ÐµÐ¹ÐºÐ¾Ð¼: ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸ .deb Ñ‡ÐµÑ€ÐµÐ· Filza/Sileo
          - Ð‘ÐµÐ· Ð´Ð¶ÐµÐ¹Ð»Ð±Ñ€ÐµÐ¹ÐºÐ°: ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸ Patched.ipa Ñ‡ÐµÑ€ÐµÐ· AltStore/Sideloadly
          
          âš ï¸ Ð¢ÐžÐ›Ð¬ÐšÐž Ð”Ð›Ð¯ Ð¢Ð•Ð¡Ð¢Ð˜Ð ÐžÐ’ÐÐÐ˜Ð¯ ÐÐ Ð¡Ð’ÐžÐ˜Ð¥ Ð£Ð¡Ð¢Ð ÐžÐ™Ð¡Ð¢Ð’ÐÐ¥!
          EOF
          
          # Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð»
          cat > injected/info.json << EOF
          {
            "stretch_method": "${{ github.event.inputs.stretch_method }}",
            "stretch_value": ${{ github.event.inputs.stretch_value }},
            "game_bundle": "${{ github.event.inputs.game_bundle }}",
            "ios_version": "${{ github.event.inputs.ios_version }}",
            "build_date": "$(date -u +"%Y-%m-%dT%H:%M:%SZ")",
            "files": [
              "stretch.dylib",
              "stretch.plist",
              "stretch-game.deb"
            ]
          }
          EOF
      
      - name: Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ñ€ÐµÐ»Ð¸Ð·Ð°
        uses: softprops/action-gh-release@v1
        with:
          tag_name: stretch-v${{ github.run_number }}
          name: ðŸ“± Game Screen Stretch v${{ github.run_number }}
          body: |
            ## ðŸŽ® Ð Ð°ÑÑ‚ÑÐ³ ÑÐºÑ€Ð°Ð½Ð° Ð´Ð»Ñ Ð¸Ð³Ñ€ v${{ github.run_number }}
            
            **ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ ÑÐ±Ð¾Ñ€ÐºÐ¸:**
            - ðŸ“ ÐœÐµÑ‚Ð¾Ð´ Ñ€Ð°ÑÑ‚ÑÐ³Ð°: `${{ github.event.inputs.stretch_method }}`
            - ðŸ’ª Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: `${{ github.event.inputs.stretch_value }}%`
            - ðŸŽ¯ Bundle ID: `${{ github.event.inputs.game_bundle }}`
            - ðŸ“± iOS Ð²ÐµÑ€ÑÐ¸Ñ: `${{ github.event.inputs.ios_version }}`
            
            **ðŸ“¦ Ð¤Ð°Ð¹Ð»Ñ‹:**
            - `stretch.dylib` - Ð´Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ°
            - `stretch.plist` - ÐºÐ¾Ð½Ñ„Ð¸Ð³ Ð´Ð»Ñ MobileSubstrate
            - `stretch-game.deb` - Ð¿Ð°ÐºÐµÑ‚ Ð´Ð»Ñ Ð´Ð¶ÐµÐ¹Ð»Ð±Ñ€ÐµÐ¹ÐºÐ°
            
            **ðŸ“¥ Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°:**
            
            ðŸ”¹ **Ð¡ Ð´Ð¶ÐµÐ¹Ð»Ð±Ñ€ÐµÐ¹ÐºÐ¾Ð¼:**
            ```
            1. Ð¡ÐºÐ°Ñ‡Ð°Ð¹ stretch-game.deb
            2. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸ Ñ‡ÐµÑ€ÐµÐ· Filza Ð¸Ð»Ð¸ Sileo
            3. ÐŸÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·Ð¸ ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð¾
            ```
            
            ðŸ”¹ **Ð‘ÐµÐ· Ð´Ð¶ÐµÐ¹Ð»Ð±Ñ€ÐµÐ¹ÐºÐ° (TrollStore):**
            ```
            1. Ð¡ÐºÐ°Ñ‡Ð°Ð¹ stretch.dylib
            2. ÐžÑ‚ÐºÑ€Ð¾Ð¹ Ð² TrollStore
            3. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸
            ```
            
            ðŸ”¹ **Ð‘ÐµÐ· Ð´Ð¶ÐµÐ¹Ð»Ð±Ñ€ÐµÐ¹ÐºÐ° (AltStore/Sideloadly):**
            ```
            1. Ð¡ÐºÐ°Ñ‡Ð°Ð¹ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ IPA Ð¸Ð³Ñ€Ñ‹
            2. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ azule Ð´Ð»Ñ Ð²Ð½ÐµÐ´Ñ€ÐµÐ½Ð¸Ñ dylib
            3. ÐŸÐ¾Ð´Ð¿Ð¸ÑˆÐ¸ ÑÐ²Ð¾ÐµÐ¹ Ð¿Ð¾Ð´Ð¿Ð¸ÑÑŒÑŽ
            4. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸ Ñ‡ÐµÑ€ÐµÐ· AltStore
            ```
            
            **âš ï¸ Ð’Ð°Ð¶Ð½Ð¾:**
            - Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ñ†ÐµÐ»ÐµÐ¹
            - Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ Ð½Ð° ÑÐ²Ð¾Ð¹ ÑÑ‚Ñ€Ð°Ñ… Ð¸ Ñ€Ð¸ÑÐº
            - ÐœÐ¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¾Ð±Ð½Ð°Ñ€ÑƒÐ¶ÐµÐ½Ð¾ Ð°Ð½Ñ‚Ð¸Ñ‡Ð¸Ñ‚Ð°Ð¼Ð¸
          files: |
            stretch.dylib
            stretch.plist
            stretch-game.deb
            injected/README.txt
            injected/info.json
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      
      - name: Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð°Ñ€Ñ‚ÐµÑ„Ð°ÐºÑ‚Ð¾Ð²
        uses: actions/upload-artifact@v4
        with:
          name: game-stretch-${{ github.run_number }}
          path: |
            stretch.dylib
            stretch.plist
            stretch-game.deb
            injected/
          retention-days: 30
